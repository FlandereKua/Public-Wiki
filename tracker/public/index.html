<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Node-Based Adventure Tracker</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app-shell">
    <header class="top-bar">
      <div class="brand">
        <h1>Node-Based Adventure Tracker</h1>
        <span class="breadcrumb">Main Menu</span>
      </div>
      <div class="top-bar-actions">
        <a href="index.html" class="ghost top-nav-btn">Menu</a>
        <a href="session.html" class="secondary top-nav-btn">Session</a>
      </div>
    </header>
    <main class="content">
      <section id="menu-placeholder" class="menu-placeholder">
        <div class="menu-card">
          <h2>Main Menu</h2>
          <p class="menu-subtitle">Create or load sessions, or convert sheets.</p>
          <div class="menu-buttons">
            <button class="primary" href="session.html?action=create">Create New Session</a>
            <button class="secondary" href="session.html?action=load">Load Session</a>
            <button class="secondary" id="convert-all-btn">Convert All Sheets</button>
            <button class="ghost" id="convert-select-btn">Convert Selected Sheets</button>
          </div>
          <p class="menu-note">Use the Session button (top right) for live tracking.</p>
        </div>
      </section>
    </main>
  </div>

  <!-- Primary Menu Overlay -->
  <div id="menu-overlay" class="overlay hidden" role="dialog" aria-modal="true" aria-labelledby="menu-overlay-title">
    <div class="overlay-card">
      <div class="overlay-header">
        <h2 id="menu-overlay-title">Menu</h2>
        <button class="icon-btn" data-close-overlay>&times;</button>
      </div>
      <div class="overlay-body menu-overlay">
        <button class="primary" data-menu-action="create">Create New Session</button>
        <button class="secondary" data-menu-action="load">Load Session</button>
        <button class="secondary" data-menu-action="settings">Settings</button>
        <button class="ghost" data-menu-action="convert">Convert CSV / JSON</button>
      </div>
    </div>
  </div>

  <!-- Create Session Modal -->
  <div id="create-session-modal" class="overlay hidden" role="dialog" aria-modal="true" aria-labelledby="create-session-title">
    <div class="overlay-card">
      <div class="overlay-header">
        <h2 id="create-session-title">Create New Session</h2>
        <button class="icon-btn" data-close-overlay>&times;</button>
      </div>
      <form id="create-session-form" class="overlay-body" novalidate>
        <label>
          Session Name
          <input type="text" id="create-session-name" name="sessionName" required maxlength="80" placeholder="e.g. Harken Town Ambush">
        </label>
        <p class="form-hint">Names are used to save and load your sessions later.</p>
        <div class="overlay-actions">
          <button type="submit" class="primary">Create Session</button>
          <button type="button" class="ghost" data-close-overlay>Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Load Session Modal -->
  <div id="load-session-modal" class="overlay hidden" role="dialog" aria-modal="true" aria-labelledby="load-session-title">
    <div class="overlay-card">
      <div class="overlay-header">
        <h2 id="load-session-title">Load Session</h2>
        <button class="icon-btn" data-close-overlay>&times;</button>
      </div>
      <div class="overlay-body">
        <div id="saved-session-list" class="saved-session-list" aria-live="polite"></div>
        <div class="overlay-divider">or</div>
        <label class="file-button">
          Import Session File
          <input type="file" id="import-session-input" accept="application/json" hidden>
        </label>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settings-modal" class="overlay hidden" role="dialog" aria-modal="true" aria-labelledby="settings-title">
    <div class="overlay-card">
      <div class="overlay-header">
        <h2 id="settings-title">Settings</h2>
        <button class="icon-btn" data-close-overlay>&times;</button>
      </div>
      <div class="overlay-body settings-body">
        <label class="switch">
          <input type="checkbox" id="theme-toggle">
          <span>Use light theme</span>
        </label>
        <label class="switch">
          <input type="checkbox" id="compact-toggle">
          <span>Compact trackers</span>
        </label>
      </div>
    </div>
  </div>

  <!-- Sheet Picker Modal -->
  <div id="sheet-picker-modal" class="overlay hidden" role="dialog" aria-modal="true" aria-labelledby="sheet-picker-title">
    <div class="overlay-card large">
      <div class="overlay-header">
        <h2 id="sheet-picker-title">Load Sheets</h2>
        <button class="icon-btn" data-close-overlay>&times;</button>
      </div>
      <div class="overlay-body sheet-picker">
        <div class="sheet-search">
          <input type="search" id="sheet-search-input" placeholder="Search by name, race, or tag">
        </div>
        <div class="sheet-columns">
          <div class="sheet-column">
            <h3>Characters</h3>
            <div id="character-sheet-list" class="sheet-list" data-sheet-category="character"></div>
          </div>
          <div class="sheet-column">
            <h3>Monsters</h3>
            <div id="monster-sheet-list" class="sheet-list" data-sheet-category="monster"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Sheet Detail Modal -->
  <div id="sheet-detail-modal" class="overlay hidden" role="dialog" aria-modal="true" aria-labelledby="sheet-detail-title">
    <div class="overlay-card large">
      <div class="overlay-header">
        <h2 id="sheet-detail-title">Sheet Detail</h2>
        <button class="icon-btn" data-close-overlay>&times;</button>
      </div>
      <div class="overlay-body detail-body">
        <pre id="sheet-detail-content"></pre>
      </div>
    </div>
  </div>

  <div id="toast" class="toast hidden" role="alert"></div>

  <script src="app.js" defer></script>
  <script src="menu.js" defer></script>
</body>
</html>